<div class="grid profile-container" style="height: 100vh;">
  <div class="col-12 md:col-12 d-flex justify-content-center align-items-center">
      <div class="card profile-card p-fluid" style="max-width: 800px; margin: auto; display: flex; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
          <div class="profile-image-container" style="flex: 1; display: flex; justify-content: center; align-items: center; padding: 2rem;">
              <img *ngIf="user?.profilePicture" [src]="user?.profilePicture" alt="Profile Picture" class="profile-image" style="border-radius: 50%; width: 150px; height: 150px; object-fit: cover;"/>
              <img *ngIf="!user?.profilePicture" src="assets/demo/images/userpic.jfif" alt="Default Profile Picture" class="profile-image" style="border-radius: 50%; width: 150px; height: 150px; object-fit: cover;"/>
          </div>

          <div class="col-12 md:col-6 profile-info" style="flex: 2; padding: 2rem;">
              <h5 style="font-weight: bold; margin-bottom: 1rem;">Profil Utilisateur</h5>

              <!-- Display user information -->
              <div class="user-info">
                  <p><strong>Nom d'utilisateur:</strong> {{ user?.username }}</p>
                  <p><strong>Email:</strong> {{ user?.email }}</p>
                  <p><strong>Téléphone:</strong> {{ user?.phone }}</p>
                  <p><strong>CIN:</strong> {{ user?.cin }}</p>
                  <p><strong>Rôle:</strong> {{ user?.role }}</p>
                  <button pButton label="Modifier" (click)="toggleEdit()" class="mt-3" style="background-color: #007bff; color: white;"></button>
              </div>

              <!-- Edit form -->
              <form *ngIf="isEditing" [formGroup]="userForm" (ngSubmit)="updateProfile()" class="edit-form">
                  <div class="field">
                      <label for="username">Nom d'utilisateur</label>
                      <input type="text" id="username" formControlName="username" pInputText
                             [ngClass]="{ 'ng-invalid ng-dirty': submit && userForm.get('username')?.errors }" />
                      <div *ngIf="submit && userForm.get('username')?.errors" class="error-message">
                          <div *ngIf="userForm.get('username')?.errors?.['required']">Ce champ est obligatoire</div>
                      </div>
                  </div>

                  <div class="field">
                      <label for="email">Email</label>
                      <input type="email" id="email" formControlName="email" pInputText
                             [ngClass]="{ 'ng-invalid ng-dirty': submit && userForm.get('email')?.errors }" />
                      <div *ngIf="submit && userForm.get('email')?.errors" class="error-message">
                          <div *ngIf="userForm.get('email')?.errors?.['required']">Ce champ est obligatoire</div>
                      </div>
                  </div>

                  <div class="field">
                      <label for="phone">Téléphone</label>
                      <input type="text" id="phone" formControlName="phone" pInputText
                             [ngClass]="{ 'ng-invalid ng-dirty': submit && userForm.get('phone')?.errors }" />
                      <div *ngIf="submit && userForm.get('phone')?.errors" class="error-message">
                          <div *ngIf="userForm.get('phone')?.errors?.['required']">Ce champ est obligatoire</div>
                      </div>
                  </div>

                  <div class="field">
                      <label for="cin">CIN</label>
                      <input type="text" id="cin" formControlName="cin" pInputText
                             [ngClass]="{ 'ng-invalid ng-dirty': submit && userForm.get('cin')?.errors }" />
                      <div *ngIf="submit && userForm.get('cin')?.errors" class="error-message">
                          <div *ngIf="userForm.get('cin')?.errors?.['required']">Ce champ est obligatoire</div>
                      </div>
                  </div>

                  <button type="submit" pButton label="Mettre à jour" style="display: flex; justify-content: flex-start; background-color: #28a745; color: white;" class="submit-button"></button>
              </form>
          </div>
      </div>
  </div>
</div>
